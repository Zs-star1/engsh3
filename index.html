<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الدرس الثالث - العائلة والأصدقاء - الإنجليزي للصف السادس - 1447هـ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&family=Poppins:wght@300;400;600;700&display=swap');
        
        * {
            font-family: 'Cairo', sans-serif;
        }
        
        .english-text {
            font-family: 'Poppins', sans-serif;
        }
        
        /* العلامة المائية المتحركة */
        .watermark {
            position: fixed;
            font-size: 14px;
            color: rgba(236, 72, 153, 0.3);
            pointer-events: none;
            z-index: 1000;
            font-weight: bold;
            animation: moveWatermark 25s linear infinite;
            white-space: nowrap;
        }
        
        @keyframes moveWatermark {
            0% { 
                top: 5%; 
                left: 2%; 
                transform: rotate(0deg);
            }
            20% { 
                top: 5%; 
                right: 2%; 
                left: auto;
                transform: rotate(72deg);
            }
            40% { 
                bottom: 5%; 
                right: 2%; 
                top: auto;
                transform: rotate(144deg);
            }
            60% { 
                bottom: 5%; 
                left: 2%; 
                right: auto;
                transform: rotate(216deg);
            }
            80% { 
                top: 50%; 
                left: 50%; 
                right: auto;
                bottom: auto;
                transform: translate(-50%, -50%) rotate(288deg);
            }
            100% { 
                top: 5%; 
                left: 2%; 
                transform: rotate(360deg);
            }
        }
        
        /* خلفية متدرجة وردية */
        .gradient-bg {
            background: linear-gradient(135deg, 
                #fdf2f8 0%, 
                #fce7f3 15%, 
                #fbcfe8 30%, 
                #f9a8d4 45%, 
                #f472b6 60%, 
                #ec4899 75%, 
                #db2777 90%, 
                #be185d 100%);
            min-height: 100vh;
        }
        
        /* مؤثرات بصرية عائمة */
        .floating-elements {
            position: fixed;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
            z-index: 1;
        }
        
        .floating-heart {
            position: absolute;
            color: rgba(236, 72, 153, 0.4);
            font-size: 32px;
            animation: floatHeart 12s ease-in-out infinite;
        }
        
        @keyframes floatHeart {
            0%, 100% { 
                transform: translateY(0px) rotate(0deg) scale(1); 
                opacity: 0.4; 
            }
            25% { 
                transform: translateY(-50px) rotate(90deg) scale(1.4); 
                opacity: 0.8; 
            }
            50% { 
                transform: translateY(-30px) rotate(180deg) scale(1.2); 
                opacity: 1; 
            }
            75% { 
                transform: translateY(-40px) rotate(270deg) scale(1.3); 
                opacity: 0.7; 
            }
        }
        
        .floating-family {
            position: absolute;
            font-size: 24px;
            animation: floatFamily 10s ease-in-out infinite;
        }
        
        @keyframes floatFamily {
            0%, 100% { 
                transform: translateY(0px) scale(1); 
                opacity: 0.6; 
            }
            50% { 
                transform: translateY(-60px) scale(1.3); 
                opacity: 1; 
            }
        }
        
        .floating-sparkle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: linear-gradient(45deg, #ec4899, #f472b6, #f9a8d4);
            border-radius: 50%;
            animation: sparkle 5s ease-in-out infinite;
        }
        
        @keyframes sparkle {
            0%, 100% { 
                opacity: 0; 
                transform: scale(0) rotate(0deg); 
            }
            50% { 
                opacity: 1; 
                transform: scale(2.5) rotate(180deg); 
            }
        }
        
        /* تصميم البطاقات */
        .activity-card {
            background: linear-gradient(135deg, #ffffff, #fdf2f8, #fce7f3);
            border: 3px solid #f9a8d4;
            border-radius: 25px;
            box-shadow: 0 15px 35px rgba(236, 72, 153, 0.2);
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        
        .activity-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 25px 50px rgba(236, 72, 153, 0.3);
            border-color: #ec4899;
        }
        
        .activity-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, #ec4899, #f472b6, #f9a8d4, #fbcfe8, #fce7f3);
        }
        
        /* أزرار وردية محسنة */
        .btn-pink {
            background: linear-gradient(135deg, #ec4899, #f472b6);
            color: white;
            border: none;
            border-radius: 20px;
            padding: 14px 28px;
            font-weight: bold;
            transition: all 0.4s ease;
            box-shadow: 0 6px 20px rgba(236, 72, 153, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .btn-pink::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: left 0.5s;
        }
        
        .btn-pink:hover::before {
            left: 100%;
        }
        
        .btn-pink:hover {
            background: linear-gradient(135deg, #db2777, #ec4899);
            transform: scale(1.08);
            box-shadow: 0 8px 25px rgba(236, 72, 153, 0.4);
        }
        
        /* حقول الإدخال المحسنة */
        .input-pink {
            border: 3px solid #f9a8d4;
            border-radius: 15px;
            padding: 12px 18px;
            transition: all 0.4s ease;
            background: rgba(255, 255, 255, 0.95);
            font-size: 16px;
        }
        
        .input-pink:focus {
            border-color: #ec4899;
            box-shadow: 0 0 0 4px rgba(236, 72, 153, 0.15);
            outline: none;
            transform: scale(1.02);
        }
        
        /* بطاقات أفراد العائلة */
        .family-card {
            background: linear-gradient(135deg, #fce7f3, #fbcfe8);
            border: 3px solid #f9a8d4;
            border-radius: 20px;
            padding: 20px;
            text-align: center;
            transition: all 0.4s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .family-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(236, 72, 153, 0.1) 0%, transparent 70%);
            transform: scale(0);
            transition: transform 0.4s ease;
        }
        
        .family-card:hover::before {
            transform: scale(1);
        }
        
        .family-card:hover {
            transform: translateY(-8px) scale(1.05);
            border-color: #ec4899;
            box-shadow: 0 15px 30px rgba(236, 72, 153, 0.3);
        }
        
        /* عناصر قابلة للسحب محسنة */
        .draggable-item {
            background: linear-gradient(135deg, #fce7f3, #fbcfe8);
            border: 3px solid #f9a8d4;
            border-radius: 15px;
            padding: 12px 20px;
            cursor: move;
            transition: all 0.4s ease;
            user-select: none;
            position: relative;
        }
        
        .draggable-item:hover {
            background: linear-gradient(135deg, #fbcfe8, #f9a8d4);
            border-color: #ec4899;
            transform: scale(1.08) rotate(2deg);
            box-shadow: 0 8px 20px rgba(236, 72, 153, 0.3);
        }
        
        .drop-zone {
            border: 3px dashed #f9a8d4;
            border-radius: 15px;
            padding: 20px;
            min-height: 70px;
            background: rgba(252, 231, 243, 0.4);
            transition: all 0.4s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .drop-zone.drag-over {
            border-color: #ec4899;
            background: rgba(236, 72, 153, 0.15);
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(236, 72, 153, 0.3);
        }
        
        /* أنيميشن النجاح المحسن */
        .success-animation {
            animation: successPulse 0.8s ease-in-out;
        }
        
        @keyframes successPulse {
            0% { transform: scale(1); }
            25% { transform: scale(1.1); background-color: #dcfce7; }
            50% { transform: scale(1.15); background-color: #bbf7d0; }
            75% { transform: scale(1.1); background-color: #dcfce7; }
            100% { transform: scale(1); }
        }
        
        /* أنيميشن الخطأ المحسن */
        .error-animation {
            animation: errorShake 0.8s ease-in-out;
        }
        
        @keyframes errorShake {
            0%, 100% { transform: translateX(0); }
            10% { transform: translateX(-8px); background-color: #fef2f2; }
            20% { transform: translateX(8px); background-color: #fee2e2; }
            30% { transform: translateX(-6px); background-color: #fef2f2; }
            40% { transform: translateX(6px); background-color: #fee2e2; }
            50% { transform: translateX(-4px); background-color: #fef2f2; }
            60% { transform: translateX(4px); background-color: #fee2e2; }
            70% { transform: translateX(-2px); background-color: #fef2f2; }
            80% { transform: translateX(2px); background-color: #fee2e2; }
        }
        
        /* شريط التقدم المحسن */
        .progress-bar {
            background: linear-gradient(90deg, #ec4899, #f472b6, #f9a8d4, #fbcfe8);
            height: 10px;
            border-radius: 5px;
            transition: width 0.6s ease;
            position: relative;
            overflow: hidden;
        }
        
        .progress-bar::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
            animation: progressShine 2s infinite;
        }
        
        @keyframes progressShine {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        
        /* نتائج ملونة محسنة */
        .score-excellent { 
            color: #059669; 
            font-weight: bold; 
            text-shadow: 0 2px 4px rgba(5, 150, 105, 0.3);
        }
        .score-good { 
            color: #0284c7; 
            font-weight: bold; 
            text-shadow: 0 2px 4px rgba(2, 132, 199, 0.3);
        }
        .score-fair { 
            color: #d97706; 
            font-weight: bold; 
            text-shadow: 0 2px 4px rgba(217, 119, 6, 0.3);
        }
        .score-needs-work { 
            color: #dc2626; 
            font-weight: bold; 
            text-shadow: 0 2px 4px rgba(220, 38, 38, 0.3);
        }
        
        /* تأثيرات خاصة محسنة */
        .glow-effect {
            box-shadow: 0 0 30px rgba(236, 72, 153, 0.6);
            animation: glow 3s ease-in-out infinite alternate;
        }
        
        @keyframes glow {
            from { 
                box-shadow: 0 0 30px rgba(236, 72, 153, 0.6);
                transform: scale(1);
            }
            to { 
                box-shadow: 0 0 40px rgba(236, 72, 153, 0.9);
                transform: scale(1.02);
            }
        }
        
        /* تحسينات إضافية */
        .activity-number {
            background: linear-gradient(135deg, #ec4899, #f472b6);
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 20px;
            margin-bottom: 20px;
            box-shadow: 0 6px 15px rgba(236, 72, 153, 0.4);
            position: relative;
        }
        
        .activity-number::after {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            right: -3px;
            bottom: -3px;
            border-radius: 50%;
            background: linear-gradient(45deg, #ec4899, #f472b6, #f9a8d4, #fbcfe8);
            z-index: -1;
            animation: rotate 3s linear infinite;
        }
        
        @keyframes rotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes speechBubbleShow {
            0% { 
                opacity: 0; 
                transform: translateX(-50%) translateY(10px) scale(0.8); 
            }
            20% { 
                opacity: 1; 
                transform: translateX(-50%) translateY(0px) scale(1.1); 
            }
            100% { 
                opacity: 1; 
                transform: translateX(-50%) translateY(0px) scale(1); 
            }
        }
        
        .completion-badge {
            background: linear-gradient(135deg, #10b981, #34d399);
            color: white;
            padding: 8px 20px;
            border-radius: 25px;
            font-size: 14px;
            font-weight: bold;
            display: inline-block;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }
        
        /* تأثيرات الصوت البصرية المحسنة */
        .sound-wave {
            display: inline-block;
            width: 5px;
            height: 25px;
            background: linear-gradient(to top, #ec4899, #f472b6);
            margin: 0 2px;
            border-radius: 3px;
            animation: soundWave 1.2s ease-in-out infinite;
        }
        
        .sound-wave:nth-child(2) { animation-delay: 0.1s; }
        .sound-wave:nth-child(3) { animation-delay: 0.2s; }
        .sound-wave:nth-child(4) { animation-delay: 0.3s; }
        .sound-wave:nth-child(5) { animation-delay: 0.4s; }
        
        @keyframes soundWave {
            0%, 100% { height: 25px; }
            50% { height: 8px; }
        }
        
        /* بطاقات الذاكرة */
        .memory-card {
            background: linear-gradient(135deg, #fce7f3, #fbcfe8);
            border: 3px solid #f9a8d4;
            border-radius: 15px;
            height: 120px;
            cursor: pointer;
            transition: all 0.4s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        
        .memory-card:hover {
            transform: scale(1.05);
            border-color: #ec4899;
            box-shadow: 0 8px 20px rgba(236, 72, 153, 0.3);
        }
        
        .memory-card.flipped {
            background: linear-gradient(135deg, #dcfce7, #bbf7d0);
            border-color: #16a34a;
        }
        
        /* تحسينات الاستجابة */
        @media (max-width: 768px) {
            .activity-card {
                margin: 10px;
                padding: 20px;
            }
            
            .floating-heart {
                font-size: 24px;
            }
            
            .activity-number {
                width: 40px;
                height: 40px;
                font-size: 16px;
            }
        }
        
        /* تأثيرات خاصة للعائلة */
        .family-tree {
            background: linear-gradient(135deg, #fdf2f8, #fce7f3);
            border: 3px solid #f9a8d4;
            border-radius: 20px;
            padding: 20px;
            position: relative;
        }
        
        .family-tree::before {
            content: '🌳';
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 30px;
            background: white;
            padding: 5px 10px;
            border-radius: 50%;
        }
        
        /* أنيميشن القلوب */
        .heart-animation {
            animation: heartBeat 2s ease-in-out infinite;
        }
        
        @keyframes heartBeat {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }
    </style>
</head>
<body class="gradient-bg">
    <!-- العلامة المائية المتحركة -->
    <div class="watermark">© عائشة الحجيلي - الدرس الثالث - العائلة والأصدقاء - 1447هـ</div>
    
    <!-- المؤثرات البصرية العائمة -->
    <div class="floating-elements">
        <!-- قلوب عائمة -->
        <div class="floating-heart" style="left: 5%; top: 15%; animation-delay: 0s;">💖</div>
        <div class="floating-heart" style="left: 85%; top: 20%; animation-delay: 1s;">💕</div>
        <div class="floating-heart" style="left: 15%; top: 65%; animation-delay: 2s;">💗</div>
        <div class="floating-heart" style="left: 75%; top: 75%; animation-delay: 3s;">💝</div>
        <div class="floating-heart" style="left: 45%; top: 10%; animation-delay: 4s;">💖</div>
        <div class="floating-heart" style="left: 25%; top: 45%; animation-delay: 5s;">💕</div>
        
        <!-- رموز العائلة عائمة -->
        <div class="floating-family" style="left: 20%; top: 25%; animation-delay: 0s;">👨‍👩‍👧‍👦</div>
        <div class="floating-family" style="left: 70%; top: 15%; animation-delay: 1s;">👪</div>
        <div class="floating-family" style="left: 30%; top: 70%; animation-delay: 2s;">👨‍👩‍👧</div>
        <div class="floating-family" style="left: 80%; top: 60%; animation-delay: 3s;">👨‍👩‍👦</div>
        <div class="floating-family" style="left: 40%; top: 40%; animation-delay: 4s;">👫</div>
        <div class="floating-family" style="left: 60%; top: 80%; animation-delay: 5s;">👬</div>
        
        <!-- شرارات عائمة -->
        <div class="floating-sparkle" style="left: 12%; top: 35%; animation-delay: 0s;"></div>
        <div class="floating-sparkle" style="left: 88%; top: 25%; animation-delay: 1s;"></div>
        <div class="floating-sparkle" style="left: 22%; top: 75%; animation-delay: 2s;"></div>
        <div class="floating-sparkle" style="left: 78%; top: 85%; animation-delay: 3s;"></div>
        <div class="floating-sparkle" style="left: 52%; top: 15%; animation-delay: 4s;"></div>
        <div class="floating-sparkle" style="left: 32%; top: 55%; animation-delay: 5s;"></div>
        <div class="floating-sparkle" style="left: 72%; top: 45%; animation-delay: 6s;"></div>
        <div class="floating-sparkle" style="left: 42%; top: 65%; animation-delay: 7s;"></div>
    </div>
    
    <!-- الهيدر -->
    <header class="bg-white/90 backdrop-blur-md shadow-xl border-b-4 border-pink-300 relative z-10">
        <div class="container mx-auto px-6 py-8">
            <div class="text-center">
                <div class="flex justify-center items-center gap-6 mb-6">
                    <div class="text-6xl heart-animation">👨‍👩‍👧‍👦</div>
                    <h1 class="text-5xl font-bold bg-gradient-to-r from-pink-600 via-pink-500 to-pink-400 bg-clip-text text-transparent">
                        الدرس الثالث: العائلة والأصدقاء
                    </h1>
                    <div class="text-6xl heart-animation">💖</div>
                </div>
                <p class="text-2xl text-gray-700 mb-3 english-text font-semibold">Family and Friends</p>
                <p class="text-xl text-pink-600 mb-2">الصف السادس - الفصل الدراسي الأول - 1447هـ</p>
                <p class="text-lg text-pink-500 mt-3 font-bold">إعداد: عائشة الحجيلي ✨</p>
                
                <!-- شريط التقدم المحسن -->
                <div class="mt-8 bg-white/60 rounded-full p-3 shadow-lg">
                    <div class="bg-gray-200 rounded-full h-5 relative overflow-hidden">
                        <div id="progressBar" class="progress-bar h-full rounded-full" style="width: 0%"></div>
                        <div class="absolute inset-0 flex items-center justify-center text-sm font-bold text-gray-700">
                            <span id="progressText">0 / 10 أنشطة مكتملة</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>
    
    <!-- المحتوى الرئيسي -->
    <main class="container mx-auto px-6 py-10 relative z-10">
        <!-- النشاط الأول: تعلم أفراد العائلة -->
        <div class="activity-card p-10 mb-10" id="activity1">
            <div class="flex items-center gap-6 mb-8">
                <div class="activity-number">1</div>
                <h2 class="text-3xl font-bold text-pink-700">👨‍👩‍👧‍👦 تعلم أفراد العائلة</h2>
                <div class="completion-badge hidden" id="badge1">مكتمل ✓</div>
            </div>
            
            <p class="text-xl text-gray-700 mb-8">تعلمي أسماء أفراد العائلة بالإنجليزية مع النطق:</p>
            
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                <div class="family-card" onclick="playFamilySound('father')">
                    <div class="text-6xl mb-4">👨</div>
                    <div class="text-xl font-bold text-pink-700 english-text mb-2">Father</div>
                    <div class="text-lg text-gray-600">أب / والد</div>
                    <button class="btn-pink text-sm px-4 py-2 mt-3">
                        🔊 استمع
                    </button>
                </div>
                
                <div class="family-card" onclick="playFamilySound('mother')">
                    <div class="text-6xl mb-4">👩</div>
                    <div class="text-xl font-bold text-pink-700 english-text mb-2">Mother</div>
                    <div class="text-lg text-gray-600">أم / والدة</div>
                    <button class="btn-pink text-sm px-4 py-2 mt-3">
                        🔊 استمع
                    </button>
                </div>
                
                <div class="family-card" onclick="playFamilySound('brother')">
                    <div class="text-6xl mb-4">👦</div>
                    <div class="text-xl font-bold text-pink-700 english-text mb-2">Brother</div>
                    <div class="text-lg text-gray-600">أخ</div>
                    <button class="btn-pink text-sm px-4 py-2 mt-3">
                        🔊 استمع
                    </button>
                </div>
                
                <div class="family-card" onclick="playFamilySound('sister')">
                    <div class="text-6xl mb-4">👧</div>
                    <div class="text-xl font-bold text-pink-700 english-text mb-2">Sister</div>
                    <div class="text-lg text-gray-600">أخت</div>
                    <button class="btn-pink text-sm px-4 py-2 mt-3">
                        🔊 استمع
                    </button>
                </div>
                
                <div class="family-card" onclick="playFamilySound('grandfather')">
                    <div class="text-6xl mb-4">👴</div>
                    <div class="text-xl font-bold text-pink-700 english-text mb-2">Grandfather</div>
                    <div class="text-lg text-gray-600">جد</div>
                    <button class="btn-pink text-sm px-4 py-2 mt-3">
                        🔊 استمع
                    </button>
                </div>
                
                <div class="family-card" onclick="playFamilySound('grandmother')">
                    <div class="text-6xl mb-4">👵</div>
                    <div class="text-xl font-bold text-pink-700 english-text mb-2">Grandmother</div>
                    <div class="text-lg text-gray-600">جدة</div>
                    <button class="btn-pink text-sm px-4 py-2 mt-3">
                        🔊 استمع
                    </button>
                </div>
                
                <div class="family-card" onclick="playFamilySound('uncle')">
                    <div class="text-6xl mb-4">👨‍🦱</div>
                    <div class="text-xl font-bold text-pink-700 english-text mb-2">Uncle</div>
                    <div class="text-lg text-gray-600">عم / خال</div>
                    <button class="btn-pink text-sm px-4 py-2 mt-3">
                        🔊 استمع
                    </button>
                </div>
                
                <div class="family-card" onclick="playFamilySound('aunt')">
                    <div class="text-6xl mb-4">👩‍🦱</div>
                    <div class="text-xl font-bold text-pink-700 english-text mb-2">Aunt</div>
                    <div class="text-lg text-gray-600">عمة / خالة</div>
                    <button class="btn-pink text-sm px-4 py-2 mt-3">
                        🔊 استمع
                    </button>
                </div>
            </div>
            
            <div class="mt-8 text-center">
                <button onclick="completeActivity(1)" class="btn-pink text-xl px-10 py-4 glow-effect">
                    ✅ اكتمل تعلم أفراد العائلة
                </button>
            </div>
        </div>
        
        <!-- النشاط الثاني: مطابقة أفراد العائلة -->
        <div class="activity-card p-10 mb-10" id="activity2">
            <div class="flex items-center gap-6 mb-8">
                <div class="activity-number">2</div>
                <h2 class="text-3xl font-bold text-pink-700">🔗 مطابقة أفراد العائلة</h2>
                <div class="completion-badge hidden" id="badge2">مكتمل ✓</div>
            </div>
            
            <p class="text-xl text-gray-700 mb-8">اسحبي كل كلمة إلى الصورة المناسبة لها:</p>
            
            <div class="grid md:grid-cols-2 gap-10">
                <div>
                    <h3 class="text-2xl font-bold text-pink-600 mb-6">الكلمات:</h3>
                    <div class="space-y-4" id="family-words">
                        <div class="draggable-item text-xl font-bold text-pink-600 english-text text-center" draggable="true" data-family="father">Father</div>
                        <div class="draggable-item text-xl font-bold text-pink-600 english-text text-center" draggable="true" data-family="mother">Mother</div>
                        <div class="draggable-item text-xl font-bold text-pink-600 english-text text-center" draggable="true" data-family="brother">Brother</div>
                        <div class="draggable-item text-xl font-bold text-pink-600 english-text text-center" draggable="true" data-family="sister">Sister</div>
                        <div class="draggable-item text-xl font-bold text-pink-600 english-text text-center" draggable="true" data-family="grandfather">Grandfather</div>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-2xl font-bold text-pink-600 mb-6">الصور:</h3>
                    <div class="space-y-4">
                        <div class="drop-zone" data-answer="father">
                            <div class="text-6xl">👨</div>
                        </div>
                        <div class="drop-zone" data-answer="mother">
                            <div class="text-6xl">👩</div>
                        </div>
                        <div class="drop-zone" data-answer="brother">
                            <div class="text-6xl">👦</div>
                        </div>
                        <div class="drop-zone" data-answer="sister">
                            <div class="text-6xl">👧</div>
                        </div>
                        <div class="drop-zone" data-answer="grandfather">
                            <div class="text-6xl">👴</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="mt-8 text-center">
                <button onclick="checkFamilyMatching()" class="btn-pink text-xl px-10 py-4">
                    🔍 تحقق من المطابقة
                </button>
            </div>
        </div>
        
        <!-- النشاط الثالث: شجرة العائلة -->
        <div class="activity-card p-10 mb-10" id="activity3">
            <div class="flex items-center gap-6 mb-8">
                <div class="activity-number">3</div>
                <h2 class="text-3xl font-bold text-pink-700">🌳 شجرة العائلة</h2>
                <div class="completion-badge hidden" id="badge3">مكتمل ✓</div>
            </div>
            
            <p class="text-xl text-gray-700 mb-8">أكملي شجرة العائلة بالكلمات المناسبة:</p>
            
            <div class="family-tree max-w-4xl mx-auto">
                <div class="grid grid-cols-2 gap-8 mb-8">
                    <div class="text-center">
                        <div class="text-6xl mb-4">👴</div>
                        <input type="text" class="input-pink w-full english-text text-center" id="tree1" placeholder="____">
                        <p class="text-sm text-gray-600 mt-2">جد</p>
                    </div>
                    <div class="text-center">
                        <div class="text-6xl mb-4">👵</div>
                        <input type="text" class="input-pink w-full english-text text-center" id="tree2" placeholder="____">
                        <p class="text-sm text-gray-600 mt-2">جدة</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-2 gap-8 mb-8">
                    <div class="text-center">
                        <div class="text-6xl mb-4">👨</div>
                        <input type="text" class="input-pink w-full english-text text-center" id="tree3" placeholder="____">
                        <p class="text-sm text-gray-600 mt-2">أب</p>
                    </div>
                    <div class="text-center">
                        <div class="text-6xl mb-4">👩</div>
                        <input type="text" class="input-pink w-full english-text text-center" id="tree4" placeholder="____">
                        <p class="text-sm text-gray-600 mt-2">أم</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-2 gap-8">
                    <div class="text-center">
                        <div class="text-6xl mb-4">👦</div>
                        <input type="text" class="input-pink w-full english-text text-center" id="tree5" placeholder="____">
                        <p class="text-sm text-gray-600 mt-2">أخ</p>
                    </div>
                    <div class="text-center">
                        <div class="text-6xl mb-4">👧</div>
                        <input type="text" class="input-pink w-full english-text text-center" id="tree6" placeholder="____">
                        <p class="text-sm text-gray-600 mt-2">أخت</p>
                    </div>
                </div>
            </div>
            
            <div class="mt-8 text-center">
                <button onclick="checkFamilyTree()" class="btn-pink text-xl px-10 py-4">
                    🔍 تحقق من شجرة العائلة
                </button>
            </div>
        </div>
        
        <!-- النشاط الرابع: تعلم كلمات الأصدقاء -->
        <div class="activity-card p-10 mb-10" id="activity4">
            <div class="flex items-center gap-6 mb-8">
                <div class="activity-number">4</div>
                <h2 class="text-3xl font-bold text-pink-700">👫 تعلم كلمات الأصدقاء</h2>
                <div class="completion-badge hidden" id="badge4">مكتمل ✓</div>
            </div>
            
            <p class="text-xl text-gray-700 mb-8">تعلمي كلمات متعلقة بالأصدقاء:</p>
            
            <div class="grid grid-cols-2 md:grid-cols-3 gap-6">
                <div class="family-card" onclick="playFriendSound('friend')">
                    <div class="text-6xl mb-4">👫</div>
                    <div class="text-xl font-bold text-pink-700 english-text mb-2">Friend</div>
                    <div class="text-lg text-gray-600">صديق</div>
                    <button class="btn-pink text-sm px-4 py-2 mt-3">
                        🔊 استمع
                    </button>
                </div>
                
                <div class="family-card" onclick="playFriendSound('best friend')">
                    <div class="text-6xl mb-4">👭</div>
                    <div class="text-xl font-bold text-pink-700 english-text mb-2">Best Friend</div>
                    <div class="text-lg text-gray-600">أفضل صديق</div>
                    <button class="btn-pink text-sm px-4 py-2 mt-3">
                        🔊 استمع
                    </button>
                </div>
                
                <div class="family-card" onclick="playFriendSound('classmate')">
                    <div class="text-6xl mb-4">🧑‍🎓</div>
                    <div class="text-xl font-bold text-pink-700 english-text mb-2">Classmate</div>
                    <div class="text-lg text-gray-600">زميل الصف</div>
                    <button class="btn-pink text-sm px-4 py-2 mt-3">
                        🔊 استمع
                    </button>
                </div>
                
                <div class="family-card" onclick="playFriendSound('neighbor')">
                    <div class="text-6xl mb-4">🏠</div>
                    <div class="text-xl font-bold text-pink-700 english-text mb-2">Neighbor</div>
                    <div class="text-lg text-gray-600">جار</div>
                    <button class="btn-pink text-sm px-4 py-2 mt-3">
                        🔊 استمع
                    </button>
                </div>
                
                <div class="family-card" onclick="playFriendSound('teammate')">
                    <div class="text-6xl mb-4">⚽</div>
                    <div class="text-xl font-bold text-pink-700 english-text mb-2">Teammate</div>
                    <div class="text-lg text-gray-600">زميل الفريق</div>
                    <button class="btn-pink text-sm px-4 py-2 mt-3">
                        🔊 استمع
                    </button>
                </div>
                
                <div class="family-card" onclick="playFriendSound('playmate')">
                    <div class="text-6xl mb-4">🎮</div>
                    <div class="text-xl font-bold text-pink-700 english-text mb-2">Playmate</div>
                    <div class="text-lg text-gray-600">رفيق اللعب</div>
                    <button class="btn-pink text-sm px-4 py-2 mt-3">
                        🔊 استمع
                    </button>
                </div>
            </div>
            
            <div class="mt-8 text-center">
                <button onclick="completeActivity(4)" class="btn-pink text-xl px-10 py-4 glow-effect">
                    ✅ اكتمل تعلم كلمات الأصدقاء
                </button>
            </div>
        </div>
        
        <!-- النشاط الخامس: اختيار من متعدد -->
        <div class="activity-card p-10 mb-10" id="activity5">
            <div class="flex items-center gap-6 mb-8">
                <div class="activity-number">5</div>
                <h2 class="text-3xl font-bold text-pink-700">🎯 اختاري الإجابة الصحيحة</h2>
                <div class="completion-badge hidden" id="badge5">مكتمل ✓</div>
            </div>
            
            <div class="space-y-8">
                <div class="bg-white/70 p-8 rounded-xl border-3 border-pink-200">
                    <p class="text-2xl font-bold text-gray-700 mb-6">1. ما معنى "Mother" بالعربية؟</p>
                    <div class="grid grid-cols-2 gap-4">
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 text-xl" 
                                onclick="selectQuizOption(this, 'q1', false)">
                            أب
                        </button>
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 text-xl" 
                                onclick="selectQuizOption(this, 'q1', true)">
                            أم
                        </button>
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 text-xl" 
                                onclick="selectQuizOption(this, 'q1', false)">
                            أخ
                        </button>
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 text-xl" 
                                onclick="selectQuizOption(this, 'q1', false)">
                            أخت
                        </button>
                    </div>
                </div>
                
                <div class="bg-white/70 p-8 rounded-xl border-3 border-pink-200">
                    <p class="text-2xl font-bold text-gray-700 mb-6">2. كيف نقول "جد" بالإنجليزية؟</p>
                    <div class="grid grid-cols-2 gap-4">
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 english-text text-xl" 
                                onclick="selectQuizOption(this, 'q2', true)">
                            Grandfather
                        </button>
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 english-text text-xl" 
                                onclick="selectQuizOption(this, 'q2', false)">
                            Father
                        </button>
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 english-text text-xl" 
                                onclick="selectQuizOption(this, 'q2', false)">
                            Uncle
                        </button>
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 english-text text-xl" 
                                onclick="selectQuizOption(this, 'q2', false)">
                            Brother
                        </button>
                    </div>
                </div>
                
                <div class="bg-white/70 p-8 rounded-xl border-3 border-pink-200">
                    <p class="text-2xl font-bold text-gray-700 mb-6">3. ما معنى "Best Friend"؟</p>
                    <div class="grid grid-cols-2 gap-4">
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 text-xl" 
                                onclick="selectQuizOption(this, 'q3', false)">
                            صديق عادي
                        </button>
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 text-xl" 
                                onclick="selectQuizOption(this, 'q3', true)">
                            أفضل صديق
                        </button>
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 text-xl" 
                                onclick="selectQuizOption(this, 'q3', false)">
                            زميل الصف
                        </button>
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 text-xl" 
                                onclick="selectQuizOption(this, 'q3', false)">
                            جار
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-8">
                <button onclick="checkQuizAnswers()" class="btn-pink text-xl px-10 py-4">
                    🔍 تحقق من الإجابات
                </button>
            </div>
        </div>
        
        <!-- النشاط السادس: لعبة الذاكرة -->
        <div class="activity-card p-10 mb-10" id="activity6">
            <div class="flex items-center gap-6 mb-8">
                <div class="activity-number">6</div>
                <h2 class="text-3xl font-bold text-pink-700">🧠 لعبة ذاكرة العائلة</h2>
                <div class="completion-badge hidden" id="badge6">مكتمل ✓</div>
            </div>
            
            <p class="text-xl text-gray-700 mb-8">اقلبي البطاقات لتجدي الأزواج المتطابقة:</p>
            
            <div class="grid grid-cols-4 gap-4 max-w-4xl mx-auto" id="family-memory-game">
                <!-- سيتم إنشاء البطاقات بواسطة JavaScript -->
            </div>
            
            <div class="text-center mt-8">
                <div class="bg-pink-50 p-6 rounded-xl border-3 border-pink-200 inline-block">
                    <p class="text-pink-700 font-bold text-lg">المحاولات: <span id="memory-attempts">0</span></p>
                    <p class="text-pink-700 font-bold text-lg">الأزواج المكتشفة: <span id="memory-pairs-found">0</span> / 6</p>
                </div>
            </div>
        </div>
        
        <!-- النشاط السابع: ترتيب الجمل -->
        <div class="activity-card p-10 mb-10" id="activity7">
            <div class="flex items-center gap-6 mb-8">
                <div class="activity-number">7</div>
                <h2 class="text-3xl font-bold text-pink-700">📝 رتبي الجمل</h2>
                <div class="completion-badge hidden" id="badge7">مكتمل ✓</div>
            </div>
            
            <p class="text-xl text-gray-700 mb-8">رتبي كلمات الجملة لتكوين جملة صحيحة:</p>
            
            <div class="space-y-8">
                <div class="bg-white/70 p-8 rounded-xl border-3 border-pink-200">
                    <p class="text-xl font-bold text-pink-700 mb-6">1. رتبي هذه الكلمات:</p>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6" id="sentence1-words">
                        <div class="draggable-item english-text text-center" draggable="true" data-order="1">This</div>
                        <div class="draggable-item english-text text-center" draggable="true" data-order="2">is</div>
                        <div class="draggable-item english-text text-center" draggable="true" data-order="3">my</div>
                        <div class="draggable-item english-text text-center" draggable="true" data-order="4">family</div>
                    </div>
                    <div class="drop-zone min-h-16" id="sentence1-result">
                        <span class="text-gray-500">اسحبي الكلمات هنا بالترتيب الصحيح</span>
                    </div>
                </div>
                
                <div class="bg-white/70 p-8 rounded-xl border-3 border-pink-200">
                    <p class="text-xl font-bold text-pink-700 mb-6">2. رتبي هذه الكلمات:</p>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6" id="sentence2-words">
                        <div class="draggable-item english-text text-center" draggable="true" data-order="1">I</div>
                        <div class="draggable-item english-text text-center" draggable="true" data-order="2">love</div>
                        <div class="draggable-item english-text text-center" draggable="true" data-order="3">my</div>
                        <div class="draggable-item english-text text-center" draggable="true" data-order="4">mother</div>
                    </div>
                    <div class="drop-zone min-h-16" id="sentence2-result">
                        <span class="text-gray-500">اسحبي الكلمات هنا بالترتيب الصحيح</span>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-8">
                <button onclick="checkSentenceOrder()" class="btn-pink text-xl px-10 py-4">
                    🔍 تحقق من ترتيب الجمل
                </button>
            </div>
        </div>
        
        <!-- النشاط الثامن: املأ الفراغات -->
        <div class="activity-card p-10 mb-10" id="activity8">
            <div class="flex items-center gap-6 mb-8">
                <div class="activity-number">8</div>
                <h2 class="text-3xl font-bold text-pink-700">✏️ املأ الفراغات</h2>
                <div class="completion-badge hidden" id="badge8">مكتمل ✓</div>
            </div>
            
            <p class="text-xl text-gray-700 mb-8">املأي الفراغات بالكلمة المناسبة:</p>
            
            <div class="space-y-8">
                <div class="bg-white/70 p-8 rounded-xl border-3 border-pink-200">
                    <p class="text-xl mb-6">1. My _______ is very kind.</p>
                    <p class="text-lg text-gray-600 mb-4">(أمي لطيفة جداً)</p>
                    <input type="text" class="input-pink w-48 english-text text-center" id="fill1" placeholder="____">
                </div>
                
                <div class="bg-white/70 p-8 rounded-xl border-3 border-pink-200">
                    <p class="text-xl mb-6">2. I have one _______ and two sisters.</p>
                    <p class="text-lg text-gray-600 mb-4">(لدي أخ واحد وأختان)</p>
                    <input type="text" class="input-pink w-48 english-text text-center" id="fill2" placeholder="____">
                </div>
                
                <div class="bg-white/70 p-8 rounded-xl border-3 border-pink-200">
                    <p class="text-xl mb-6">3. My _______ tells me stories.</p>
                    <p class="text-lg text-gray-600 mb-4">(جدتي تحكي لي القصص)</p>
                    <input type="text" class="input-pink w-48 english-text text-center" id="fill3" placeholder="____">
                </div>
                
                <div class="bg-white/70 p-8 rounded-xl border-3 border-pink-200">
                    <p class="text-xl mb-6">4. Sara is my best _______.</p>
                    <p class="text-lg text-gray-600 mb-4">(سارة هي أفضل صديقة لي)</p>
                    <input type="text" class="input-pink w-48 english-text text-center" id="fill4" placeholder="____">
                </div>
            </div>
            
            <div class="text-center mt-8">
                <button onclick="checkFillBlanks()" class="btn-pink text-xl px-10 py-4">
                    🔍 تحقق من الإجابات
                </button>
            </div>
        </div>
        
        <!-- النشاط التاسع: وصف العائلة -->
        <div class="activity-card p-10 mb-10" id="activity9">
            <div class="flex items-center gap-6 mb-8">
                <div class="activity-number">9</div>
                <h2 class="text-3xl font-bold text-pink-700">👨‍👩‍👧‍👦 وصف العائلة</h2>
                <div class="completion-badge hidden" id="badge9">مكتمل ✓</div>
            </div>
            
            <p class="text-xl text-gray-700 mb-8">اختاري الوصف المناسب لكل فرد من العائلة:</p>
            
            <div class="space-y-8">
                <div class="bg-white/70 p-8 rounded-xl border-3 border-pink-200">
                    <div class="flex items-center gap-6 mb-6">
                        <div class="text-6xl">👨</div>
                        <div>
                            <p class="text-2xl font-bold text-gray-700">Father</p>
                            <p class="text-lg text-gray-600">أب</p>
                        </div>
                    </div>
                    <p class="text-xl mb-4">اختاري الوصف المناسب:</p>
                    <div class="grid grid-cols-2 gap-4">
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 english-text text-lg" 
                                onclick="selectDescriptionOption(this, 'd1', true)">
                            He is strong
                        </button>
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 english-text text-lg" 
                                onclick="selectDescriptionOption(this, 'd1', false)">
                            She is beautiful
                        </button>
                    </div>
                </div>
                
                <div class="bg-white/70 p-8 rounded-xl border-3 border-pink-200">
                    <div class="flex items-center gap-6 mb-6">
                        <div class="text-6xl">👩</div>
                        <div>
                            <p class="text-2xl font-bold text-gray-700">Mother</p>
                            <p class="text-lg text-gray-600">أم</p>
                        </div>
                    </div>
                    <p class="text-xl mb-4">اختاري الوصف المناسب:</p>
                    <div class="grid grid-cols-2 gap-4">
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 english-text text-lg" 
                                onclick="selectDescriptionOption(this, 'd2', false)">
                            He is tall
                        </button>
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 english-text text-lg" 
                                onclick="selectDescriptionOption(this, 'd2', true)">
                            She is kind
                        </button>
                    </div>
                </div>
                
                <div class="bg-white/70 p-8 rounded-xl border-3 border-pink-200">
                    <div class="flex items-center gap-6 mb-6">
                        <div class="text-6xl">👴</div>
                        <div>
                            <p class="text-2xl font-bold text-gray-700">Grandfather</p>
                            <p class="text-lg text-gray-600">جد</p>
                        </div>
                    </div>
                    <p class="text-xl mb-4">اختاري الوصف المناسب:</p>
                    <div class="grid grid-cols-2 gap-4">
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 english-text text-lg" 
                                onclick="selectDescriptionOption(this, 'd3', true)">
                            He is wise
                        </button>
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 english-text text-lg" 
                                onclick="selectDescriptionOption(this, 'd3', false)">
                            She is young
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="text-center mt-8">
                <button onclick="checkDescriptions()" class="btn-pink text-xl px-10 py-4">
                    🔍 تحقق من الأوصاف
                </button>
            </div>
        </div>
        
        <!-- النشاط العاشر: التقييم النهائي -->
        <div class="activity-card p-10 mb-10" id="activity10">
            <div class="flex items-center gap-6 mb-8">
                <div class="activity-number">10</div>
                <h2 class="text-3xl font-bold text-pink-700">🏆 التقييم النهائي</h2>
                <div class="completion-badge hidden" id="badge10">مكتمل ✓</div>
            </div>
            
            <p class="text-xl text-gray-700 mb-8">اختبار شامل للعائلة والأصدقاء:</p>
            
            <div class="space-y-8">
                <div class="bg-white/70 p-8 rounded-xl border-3 border-pink-200">
                    <p class="text-2xl font-bold text-gray-700 mb-6">1. اكتبي معنى هذه الكلمات بالعربية:</p>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <p class="english-text text-xl mb-2">Sister:</p>
                            <input type="text" class="input-pink w-full text-center" id="final1" placeholder="____">
                        </div>
                        <div>
                            <p class="english-text text-xl mb-2">Uncle:</p>
                            <input type="text" class="input-pink w-full text-center" id="final2" placeholder="____">
                        </div>
                    </div>
                </div>
                
                <div class="bg-white/70 p-8 rounded-xl border-3 border-pink-200">
                    <p class="text-2xl font-bold text-gray-700 mb-6">2. كيف تقول "جدة" بالإنجليزية؟</p>
                    <div class="grid grid-cols-2 gap-4">
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 english-text text-xl" 
                                onclick="selectFinalOption(this, 'finalQ1', true)">
                            Grandmother
                        </button>
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 english-text text-xl" 
                                onclick="selectFinalOption(this, 'finalQ1', false)">
                            Grandfather
                        </button>
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 english-text text-xl" 
                                onclick="selectFinalOption(this, 'finalQ1', false)">
                            Mother
                        </button>
                        <button class="quiz-option p-4 bg-pink-50 border-3 border-pink-200 rounded-xl hover:bg-pink-100 english-text text-xl" 
                                onclick="selectFinalOption(this, 'finalQ1', false)">
                            Aunt
                        </button>
                    </div>
                </div>
                
                <div class="bg-white/70 p-8 rounded-xl border-3 border-pink-200">
                    <p class="text-2xl font-bold text-gray-700 mb-6">3. أكملي الجملة:</p>
                    <p class="text-xl mb-4 english-text">My _______ is my best friend.</p>
                    <p class="text-lg text-gray-600 mb-4">(أختي هي أفضل صديقة لي)</p>
                    <input type="text" class="input-pink w-48 english-text text-center mx-auto block" id="final3" placeholder="____">
                </div>
                
                <div class="bg-white/70 p-8 rounded-xl border-3 border-pink-200">
                    <p class="text-2xl font-bold text-gray-700 mb-6">4. رتبي هذه الجملة:</p>
                    <p class="text-xl mb-4 english-text">love - I - family - my</p>
                    <input type="text" class="input-pink w-full english-text text-center" id="final4" 
                           placeholder="اكتبي الجملة مرتبة">
                </div>
            </div>
            
            <div class="text-center mt-8">
                <button onclick="checkFinalAssessment()" class="btn-pink text-xl px-12 py-5 glow-effect">
                    🏆 إنهاء التقييم النهائي
                </button>
            </div>
        </div>
        
        <!-- نتائج الدرس -->
        <div class="activity-card p-10 mb-10 hidden" id="lesson-results">
            <div class="text-center">
                <div class="text-8xl mb-6">🎉</div>
                <h2 class="text-4xl font-bold text-pink-700 mb-6">تهانينا! أكملت الدرس الثالث بنجاح!</h2>
                
                <div class="bg-pink-50 p-8 rounded-xl border-3 border-pink-200 mb-8">
                    <div class="grid md:grid-cols-3 gap-8 text-center">
                        <div>
                            <div class="text-4xl font-bold text-pink-600" id="total-score">0</div>
                            <p class="text-xl text-gray-700">النتيجة الإجمالية</p>
                        </div>
                        <div>
                            <div class="text-4xl font-bold text-pink-600" id="completed-activities">0</div>
                            <p class="text-xl text-gray-700">الأنشطة المكتملة</p>
                        </div>
                        <div>
                            <div class="text-4xl font-bold text-pink-600" id="performance-level">ممتاز</div>
                            <p class="text-xl text-gray-700">مستوى الأداء</p>
                        </div>
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-pink-100 to-pink-50 p-8 rounded-xl border-3 border-pink-200">
                    <h3 class="text-2xl font-bold text-pink-700 mb-6">🌟 ما تعلمتيه اليوم:</h3>
                    <div class="grid md:grid-cols-2 gap-6 text-right">
                        <div class="space-y-3">
                            <p class="text-lg text-gray-700">✅ أفراد العائلة</p>
                            <p class="text-lg text-gray-700">✅ كلمات الأصدقاء</p>
                            <p class="text-lg text-gray-700">✅ شجرة العائلة</p>
                            <p class="text-lg text-gray-700">✅ وصف أفراد العائلة</p>
                            <p class="text-lg text-gray-700">✅ ترتيب الجمل</p>
                        </div>
                        <div class="space-y-3">
                            <p class="text-lg text-gray-700">✅ املأ الفراغات</p>
                            <p class="text-lg text-gray-700">✅ لعبة الذاكرة</p>
                            <p class="text-lg text-gray-700">✅ المطابقة</p>
                            <p class="text-lg text-gray-700">✅ النطق والاستماع</p>
                            <p class="text-lg text-gray-700">✅ التعبير عن المشاعر</p>
                        </div>
                    </div>
                </div>
                
                <button onclick="restartLesson()" class="btn-pink text-xl px-10 py-4 mt-8">
                    🔄 إعادة الدرس
                </button>
            </div>
        </div>
    </main>
    
    <script>
        // متغيرات عامة
        let completedActivities = 0;
        let totalScore = 0;
        let quizAnswers = {};
        let descriptionAnswers = {};
        let finalAnswers = {};
        let memoryCards = [];
        let flippedCards = [];
        let memoryAttempts = 0;
        let memoryPairsFound = 0;
        
        // بيانات لعبة ذاكرة العائلة
        const familyMemoryPairs = [
            { id: 1, emoji: '👨', name: 'Father', arabic: 'أب' },
            { id: 2, emoji: '👩', name: 'Mother', arabic: 'أم' },
            { id: 3, emoji: '👦', name: 'Brother', arabic: 'أخ' },
            { id: 4, emoji: '👧', name: 'Sister', arabic: 'أخت' },
            { id: 5, emoji: '👴', name: 'Grandfather', arabic: 'جد' },
            { id: 6, emoji: '👵', name: 'Grandmother', arabic: 'جدة' }
        ];
        
        // تشغيل صوت أفراد العائلة باستخدام Web Speech API
        function playFamilySound(word) {
            const card = event.target.closest('.family-card');
            if (card) {
                // تأثير بصري محسن
                card.classList.add('glow-effect');
                
                // إضافة تأثير الموجات الصوتية
                const soundWaves = document.createElement('div');
                soundWaves.className = 'sound-indicator';
                soundWaves.innerHTML = `
                    <div class="sound-wave"></div>
                    <div class="sound-wave"></div>
                    <div class="sound-wave"></div>
                    <div class="sound-wave"></div>
                    <div class="sound-wave"></div>
                `;
                soundWaves.style.cssText = `
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    display: flex;
                    align-items: center;
                    gap: 3px;
                    z-index: 10;
                `;
                card.style.position = 'relative';
                card.appendChild(soundWaves);
                
                // تشغيل الصوت باستخدام Web Speech API
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(word);
                    utterance.lang = 'en-US';
                    utterance.rate = 0.8;
                    utterance.pitch = 1.2;
                    utterance.volume = 1;
                    
                    // عند انتهاء النطق
                    utterance.onend = function() {
                        card.classList.remove('glow-effect');
                        if (soundWaves.parentNode) {
                            soundWaves.remove();
                        }
                    };
                    
                    speechSynthesis.speak(utterance);
                } else {
                    // في حالة عدم دعم المتصفح للـ Speech API
                    setTimeout(() => {
                        card.classList.remove('glow-effect');
                        if (soundWaves.parentNode) {
                            soundWaves.remove();
                        }
                        showSpeechBubble(card, `🔊 ${word}`);
                    }, 1500);
                }
            }
        }
        
        // تشغيل صوت كلمات الأصدقاء
        function playFriendSound(word) {
            const card = event.target.closest('.family-card');
            if (card) {
                // تأثير بصري محسن
                card.classList.add('glow-effect');
                
                // إضافة تأثير الموجات الصوتية
                const soundWaves = document.createElement('div');
                soundWaves.className = 'sound-indicator';
                soundWaves.innerHTML = `
                    <div class="sound-wave"></div>
                    <div class="sound-wave"></div>
                    <div class="sound-wave"></div>
                    <div class="sound-wave"></div>
                    <div class="sound-wave"></div>
                `;
                soundWaves.style.cssText = `
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    display: flex;
                    align-items: center;
                    gap: 3px;
                    z-index: 10;
                `;
                card.style.position = 'relative';
                card.appendChild(soundWaves);
                
                // تشغيل الصوت باستخدام Web Speech API
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(word);
                    utterance.lang = 'en-US';
                    utterance.rate = 0.8;
                    utterance.pitch = 1.2;
                    utterance.volume = 1;
                    
                    // عند انتهاء النطق
                    utterance.onend = function() {
                        card.classList.remove('glow-effect');
                        if (soundWaves.parentNode) {
                            soundWaves.remove();
                        }
                    };
                    
                    speechSynthesis.speak(utterance);
                } else {
                    // في حالة عدم دعم المتصفح للـ Speech API
                    setTimeout(() => {
                        card.classList.remove('glow-effect');
                        if (soundWaves.parentNode) {
                            soundWaves.remove();
                        }
                        showSpeechBubble(card, `🔊 ${word}`);
                    }, 1500);
                }
            }
        }
        
        // عرض فقاعة النطق في حالة عدم دعم المتصفح
        function showSpeechBubble(element, text) {
            const bubble = document.createElement('div');
            bubble.className = 'speech-bubble';
            bubble.textContent = text;
            bubble.style.cssText = `
                position: absolute;
                top: -60px;
                left: 50%;
                transform: translateX(-50%);
                background: linear-gradient(135deg, #ec4899, #f472b6);
                color: white;
                padding: 10px 15px;
                border-radius: 20px;
                font-size: 14px;
                font-weight: bold;
                white-space: nowrap;
                z-index: 1000;
                animation: speechBubbleShow 2s ease-in-out;
                box-shadow: 0 4px 15px rgba(236, 72, 153, 0.4);
            `;
            
            // إضافة السهم
            const arrow = document.createElement('div');
            arrow.style.cssText = `
                position: absolute;
                top: 100%;
                left: 50%;
                transform: translateX(-50%);
                width: 0;
                height: 0;
                border-left: 8px solid transparent;
                border-right: 8px solid transparent;
                border-top: 8px solid #ec4899;
            `;
            bubble.appendChild(arrow);
            
            element.style.position = 'relative';
            element.appendChild(bubble);
            
            setTimeout(() => {
                if (bubble.parentNode) {
                    bubble.remove();
                }
            }, 2000);
        }
        
        // إكمال النشاط
        function completeActivity(activityNum) {
            const badge = document.getElementById(`badge${activityNum}`);
            if (!badge.classList.contains('hidden')) {
                return; // النشاط مكتمل مسبقاً
            }
            
            badge.classList.remove('hidden');
            completedActivities++;
            totalScore += 10;
            updateProgress();
            
            // تأثير بصري
            const activity = document.getElementById(`activity${activityNum}`);
            activity.classList.add('success-animation');
            setTimeout(() => {
                activity.classList.remove('success-animation');
            }, 800);
            
            // التحقق من إكمال جميع الأنشطة
            if (completedActivities === 10) {
                setTimeout(() => {
                    showFinalResults();
                }, 1000);
            }
        }
        
        // تحديث شريط التقدم
        function updateProgress() {
            const progressBar = document.getElementById('progressBar');
            const progressText = document.getElementById('progressText');
            const percentage = (completedActivities / 10) * 100;
            
            progressBar.style.width = percentage + '%';
            progressText.textContent = `${completedActivities} / 10 أنشطة مكتملة`;
        }
        
        // تحقق من مطابقة أفراد العائلة
        function checkFamilyMatching() {
            const dropZones = document.querySelectorAll('#activity2 .drop-zone');
            let correct = 0;
            
            dropZones.forEach(zone => {
                const droppedItem = zone.querySelector('.draggable-item');
                if (droppedItem && droppedItem.dataset.family === zone.dataset.answer) {
                    zone.classList.add('success-animation');
                    zone.style.backgroundColor = '#dcfce7';
                    zone.style.borderColor = '#16a34a';
                    correct++;
                } else {
                    zone.classList.add('error-animation');
                    zone.style.backgroundColor = '#fef2f2';
                    zone.style.borderColor = '#dc2626';
                }
            });
            
            if (correct === 5) {
                totalScore += 20;
                completeActivity(2);
                setTimeout(() => {
                    alert('🎉 ممتاز! جميع المطابقات صحيحة!');
                }, 800);
            } else {
                alert(`✅ ${correct} من 5 مطابقات صحيحة. حاولي مرة أخرى!`);
            }
        }
        
        // تحقق من شجرة العائلة
        function checkFamilyTree() {
            const answers = ['grandfather', 'grandmother', 'father', 'mother', 'brother', 'sister'];
            let correct = 0;
            
            answers.forEach((answer, index) => {
                const input = document.getElementById(`tree${index + 1}`);
                if (input.value.toLowerCase().trim() === answer) {
                    input.classList.add('success-animation');
                    input.style.backgroundColor = '#dcfce7';
                    input.style.borderColor = '#16a34a';
                    correct++;
                } else {
                    input.classList.add('error-animation');
                    input.style.backgroundColor = '#fef2f2';
                    input.style.borderColor = '#dc2626';
                }
            });
            
            if (correct === 6) {
                totalScore += 20;
                completeActivity(3);
                setTimeout(() => {
                    alert('🎉 رائع! شجرة العائلة مكتملة بشكل صحيح!');
                }, 800);
            } else {
                alert(`✅ ${correct} من 6 إجابات صحيحة. حاولي مرة أخرى!`);
            }
        }
        
        // اختيار إجابة الاختبار
        function selectQuizOption(button, question, isCorrect) {
            const siblings = button.parentElement.querySelectorAll('.quiz-option');
            siblings.forEach(sib => {
                sib.classList.remove('bg-pink-200', 'border-pink-500');
                sib.classList.add('bg-pink-50', 'border-pink-200');
            });
            
            button.classList.remove('bg-pink-50', 'border-pink-200');
            button.classList.add('bg-pink-200', 'border-pink-500');
            
            quizAnswers[question] = isCorrect;
        }
        
        // تحقق من إجابات الاختبار
        function checkQuizAnswers() {
            let correct = 0;
            const totalQuestions = 3;
            
            for (let i = 1; i <= totalQuestions; i++) {
                if (quizAnswers[`q${i}`] === true) {
                    correct++;
                }
            }
            
            // تلوين الإجابات
            document.querySelectorAll('#activity5 .quiz-option').forEach(button => {
                if (button.classList.contains('bg-pink-200')) {
                    const isCorrect = button.onclick.toString().includes('true');
                    if (isCorrect) {
                        button.style.backgroundColor = '#dcfce7';
                        button.style.borderColor = '#16a34a';
                        button.classList.add('success-animation');
                    } else {
                        button.style.backgroundColor = '#fef2f2';
                        button.style.borderColor = '#dc2626';
                        button.classList.add('error-animation');
                    }
                }
            });
            
            if (correct === totalQuestions) {
                totalScore += 20;
                completeActivity(5);
                setTimeout(() => {
                    alert('🎉 ممتاز! جميع الإجابات صحيحة!');
                }, 800);
            } else {
                alert(`✅ ${correct} من ${totalQuestions} إجابات صحيحة. حاولي مرة أخرى!`);
            }
        }
        
        // إنشاء لعبة ذاكرة العائلة
        function initFamilyMemoryGame() {
            const gameContainer = document.getElementById('family-memory-game');
            const cards = [];
            
            // إنشاء البطاقات
            familyMemoryPairs.forEach(pair => {
                cards.push({ id: pair.id, type: 'emoji', display: pair.emoji });
                cards.push({ id: pair.id, type: 'name', display: pair.name });
            });
            
            // خلط البطاقات
            cards.sort(() => Math.random() - 0.5);
            
            // إنشاء HTML للبطاقات
            gameContainer.innerHTML = '';
            cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'memory-card';
                cardElement.dataset.id = card.id;
                cardElement.dataset.type = card.type;
                cardElement.dataset.index = index;
                cardElement.innerHTML = `
                    <div class="card-front text-3xl">💖</div>
                    <div class="card-back hidden ${card.type === 'name' ? 'english-text text-lg font-bold' : 'text-4xl'}">
                        ${card.display}
                    </div>
                `;
                cardElement.onclick = () => flipMemoryCard(cardElement);
                gameContainer.appendChild(cardElement);
            });
            
            memoryCards = cards;
        }
        
        // قلب بطاقة الذاكرة
        function flipMemoryCard(cardElement) {
            if (flippedCards.length >= 2 || cardElement.classList.contains('flipped')) {
                return;
            }
            
            cardElement.classList.add('flipped');
            cardElement.querySelector('.card-front').classList.add('hidden');
            cardElement.querySelector('.card-back').classList.remove('hidden');
            
            flippedCards.push(cardElement);
            
            if (flippedCards.length === 2) {
                memoryAttempts++;
                document.getElementById('memory-attempts').textContent = memoryAttempts;
                
                setTimeout(() => {
                    checkMemoryMatch();
                }, 1000);
            }
        }
        
        // تحقق من تطابق بطاقات الذاكرة
        function checkMemoryMatch() {
            const [card1, card2] = flippedCards;
            const id1 = card1.dataset.id;
            const id2 = card2.dataset.id;
            
            if (id1 === id2) {
                // تطابق صحيح
                card1.style.backgroundColor = '#dcfce7';
                card2.style.backgroundColor = '#dcfce7';
                card1.style.borderColor = '#16a34a';
                card2.style.borderColor = '#16a34a';
                
                memoryPairsFound++;
                document.getElementById('memory-pairs-found').textContent = memoryPairsFound;
                
                if (memoryPairsFound === 6) {
                    totalScore += 20;
                    completeActivity(6);
                    setTimeout(() => {
                        alert('🎉 رائع! أكملت لعبة ذاكرة العائلة بنجاح!');
                    }, 500);
                }
            } else {
                // عدم تطابق
                card1.classList.remove('flipped');
                card2.classList.remove('flipped');
                card1.querySelector('.card-front').classList.remove('hidden');
                card1.querySelector('.card-back').classList.add('hidden');
                card2.querySelector('.card-front').classList.remove('hidden');
                card2.querySelector('.card-back').classList.add('hidden');
            }
            
            flippedCards = [];
        }
        
        // تحقق من ترتيب الجمل
        function checkSentenceOrder() {
            // التحقق من الجملة الأولى
            const sentence1 = document.getElementById('sentence1-result');
            const words1 = sentence1.querySelectorAll('.draggable-item');
            let sentence1Correct = true;
            
            if (words1.length === 4) {
                for (let i = 0; i < words1.length; i++) {
                    if (words1[i].dataset.order !== (i + 1).toString()) {
                        sentence1Correct = false;
                        break;
                    }
                }
            } else {
                sentence1Correct = false;
            }
            
            // التحقق من الجملة الثانية
            const sentence2 = document.getElementById('sentence2-result');
            const words2 = sentence2.querySelectorAll('.draggable-item');
            let sentence2Correct = true;
            
            if (words2.length === 4) {
                for (let i = 0; i < words2.length; i++) {
                    if (words2[i].dataset.order !== (i + 1).toString()) {
                        sentence2Correct = false;
                        break;
                    }
                }
            } else {
                sentence2Correct = false;
            }
            
            // تطبيق التأثيرات البصرية
            if (sentence1Correct) {
                sentence1.classList.add('success-animation');
                sentence1.style.backgroundColor = '#dcfce7';
                sentence1.style.borderColor = '#16a34a';
            } else {
                sentence1.classList.add('error-animation');
                sentence1.style.backgroundColor = '#fef2f2';
                sentence1.style.borderColor = '#dc2626';
            }
            
            if (sentence2Correct) {
                sentence2.classList.add('success-animation');
                sentence2.style.backgroundColor = '#dcfce7';
                sentence2.style.borderColor = '#16a34a';
            } else {
                sentence2.classList.add('error-animation');
                sentence2.style.backgroundColor = '#fef2f2';
                sentence2.style.borderColor = '#dc2626';
            }
            
            if (sentence1Correct && sentence2Correct) {
                totalScore += 15;
                completeActivity(7);
                setTimeout(() => {
                    alert('🎉 ممتاز! جميع الجمل مرتبة بشكل صحيح!');
                }, 800);
            } else {
                let correctCount = (sentence1Correct ? 1 : 0) + (sentence2Correct ? 1 : 0);
                alert(`✅ ${correctCount} من 2 جمل صحيحة. حاولي مرة أخرى!`);
            }
        }
        
        // تحقق من املأ الفراغات
        function checkFillBlanks() {
            const answers = ['mother', 'brother', 'grandmother', 'friend'];
            let correct = 0;
            
            answers.forEach((answer, index) => {
                const input = document.getElementById(`fill${index + 1}`);
                if (input.value.toLowerCase().trim() === answer) {
                    input.classList.add('success-animation');
                    input.style.backgroundColor = '#dcfce7';
                    input.style.borderColor = '#16a34a';
                    correct++;
                } else {
                    input.classList.add('error-animation');
                    input.style.backgroundColor = '#fef2f2';
                    input.style.borderColor = '#dc2626';
                }
            });
            
            if (correct === 4) {
                totalScore += 15;
                completeActivity(8);
                setTimeout(() => {
                    alert('🎉 رائع! جميع الفراغات مملوءة بشكل صحيح!');
                }, 800);
            } else {
                alert(`✅ ${correct} من 4 إجابات صحيحة. حاولي مرة أخرى!`);
            }
        }
        
        // اختيار إجابة الوصف
        function selectDescriptionOption(button, question, isCorrect) {
            const siblings = button.parentElement.querySelectorAll('.quiz-option');
            siblings.forEach(sib => {
                sib.classList.remove('bg-pink-200', 'border-pink-500');
                sib.classList.add('bg-pink-50', 'border-pink-200');
            });
            
            button.classList.remove('bg-pink-50', 'border-pink-200');
            button.classList.add('bg-pink-200', 'border-pink-500');
            
            descriptionAnswers[question] = isCorrect;
        }
        
        // تحقق من الأوصاف
        function checkDescriptions() {
            let correct = 0;
            const totalQuestions = 3;
            
            for (let i = 1; i <= totalQuestions; i++) {
                if (descriptionAnswers[`d${i}`] === true) {
                    correct++;
                }
            }
            
            // تلوين الإجابات
            document.querySelectorAll('#activity9 .quiz-option').forEach(button => {
                if (button.classList.contains('bg-pink-200')) {
                    const isCorrect = button.onclick.toString().includes('true');
                    if (isCorrect) {
                        button.style.backgroundColor = '#dcfce7';
                        button.style.borderColor = '#16a34a';
                        button.classList.add('success-animation');
                    } else {
                        button.style.backgroundColor = '#fef2f2';
                        button.style.borderColor = '#dc2626';
                        button.classList.add('error-animation');
                    }
                }
            });
            
            if (correct === totalQuestions) {
                totalScore += 15;
                completeActivity(9);
                setTimeout(() => {
                    alert('🎉 ممتاز! جميع الأوصاف صحيحة!');
                }, 800);
            } else {
                alert(`✅ ${correct} من ${totalQuestions} أوصاف صحيحة. حاولي مرة أخرى!`);
            }
        }
        
        // اختيار إجابة التقييم النهائي
        function selectFinalOption(button, question, isCorrect) {
            const siblings = button.parentElement.querySelectorAll('.quiz-option');
            siblings.forEach(sib => {
                sib.classList.remove('bg-pink-200', 'border-pink-500');
                sib.classList.add('bg-pink-50', 'border-pink-200');
            });
            
            button.classList.remove('bg-pink-50', 'border-pink-200');
            button.classList.add('bg-pink-200', 'border-pink-500');
            
            finalAnswers[question] = isCorrect;
        }
        
        // تحقق من التقييم النهائي
        function checkFinalAssessment() {
            let score = 0;
            
            // تحقق من الترجمة
            const input1 = document.getElementById('final1');
            const input2 = document.getElementById('final2');
            
            if (input1.value.trim() === 'أخت') {
                score += 5;
                input1.style.backgroundColor = '#dcfce7';
                input1.style.borderColor = '#16a34a';
            }
            
            if (input2.value.trim() === 'عم' || input2.value.trim() === 'خال') {
                score += 5;
                input2.style.backgroundColor = '#dcfce7';
                input2.style.borderColor = '#16a34a';
            }
            
            // تحقق من سؤال الاختيار
            if (finalAnswers['finalQ1'] === true) {
                score += 10;
            }
            
            // تحقق من إكمال الجملة
            const input3 = document.getElementById('final3');
            if (input3.value.toLowerCase().trim() === 'sister') {
                score += 10;
                input3.style.backgroundColor = '#dcfce7';
                input3.style.borderColor = '#16a34a';
            }
            
            // تحقق من ترتيب الجملة
            const input4 = document.getElementById('final4');
            if (input4.value.toLowerCase().trim() === 'i love my family') {
                score += 10;
                input4.style.backgroundColor = '#dcfce7';
                input4.style.borderColor = '#16a34a';
            }
            
            totalScore += score;
            completeActivity(10);
            
            setTimeout(() => {
                alert(`🎉 أكملت التقييم النهائي! حصلت على ${score} من 40 نقطة!`);
            }, 800);
        }
        
        // عرض النتائج النهائية
        function showFinalResults() {
            const resultsDiv = document.getElementById('lesson-results');
            resultsDiv.classList.remove('hidden');
            
            document.getElementById('total-score').textContent = totalScore + '%';
            document.getElementById('completed-activities').textContent = completedActivities + '/10';
            
            let performanceLevel = '';
            if (totalScore >= 90) {
                performanceLevel = 'ممتاز';
                document.getElementById('performance-level').className = 'text-4xl font-bold score-excellent';
            } else if (totalScore >= 75) {
                performanceLevel = 'جيد جداً';
                document.getElementById('performance-level').className = 'text-4xl font-bold score-good';
            } else if (totalScore >= 60) {
                performanceLevel = 'جيد';
                document.getElementById('performance-level').className = 'text-4xl font-bold score-fair';
            } else {
                performanceLevel = 'يحتاج تحسين';
                document.getElementById('performance-level').className = 'text-4xl font-bold score-needs-work';
            }
            
            document.getElementById('performance-level').textContent = performanceLevel;
            
            // التمرير إلى النتائج
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }
        
        // إعادة تشغيل الدرس
        function restartLesson() {
            location.reload();
        }
        
        // إعداد السحب والإفلات
        document.addEventListener('DOMContentLoaded', function() {
            // إنشاء لعبة ذاكرة العائلة
            initFamilyMemoryGame();
            
            // إعداد السحب والإفلات
            let draggedElement = null;
            
            document.addEventListener('dragstart', function(e) {
                if (e.target.classList.contains('draggable-item')) {
                    draggedElement = e.target;
                    e.target.style.opacity = '0.5';
                }
            });
            
            document.addEventListener('dragend', function(e) {
                if (e.target.classList.contains('draggable-item')) {
                    e.target.style.opacity = '1';
                }
            });
            
            document.addEventListener('dragover', function(e) {
                if (e.target.classList.contains('drop-zone')) {
                    e.preventDefault();
                    e.target.classList.add('drag-over');
                }
            });
            
            document.addEventListener('dragleave', function(e) {
                if (e.target.classList.contains('drop-zone')) {
                    e.target.classList.remove('drag-over');
                }
            });
            
            document.addEventListener('drop', function(e) {
                if (e.target.classList.contains('drop-zone') && draggedElement) {
                    e.preventDefault();
                    e.target.classList.remove('drag-over');
                    
                    // للجمل، نضيف العنصر بدلاً من استبداله
                    if (e.target.id && (e.target.id.includes('sentence') || e.target.id.includes('result'))) {
                        const clonedElement = draggedElement.cloneNode(true);
                        clonedElement.style.opacity = '1';
                        clonedElement.draggable = false;
                        clonedElement.style.display = 'inline-block';
                        clonedElement.style.margin = '2px';
                        e.target.appendChild(clonedElement);
                        
                        // إخفاء النص الافتراضي
                        const defaultText = e.target.querySelector('span');
                        if (defaultText) {
                            defaultText.style.display = 'none';
                        }
                    } else {
                        // للأنشطة الأخرى، نستبدل العنصر
                        const existingItem = e.target.querySelector('.draggable-item');
                        if (existingItem) {
                            existingItem.remove();
                        }
                        
                        const clonedElement = draggedElement.cloneNode(true);
                        clonedElement.style.opacity = '1';
                        clonedElement.draggable = false;
                        e.target.appendChild(clonedElement);
                    }
                    
                    draggedElement = null;
                }
            });
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96af040f2159ea75',t:'MTc1NDQ4ODM1OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
